/**/
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.MagicGrid=i()}(this,function(){"use strict";var t=function(t){if(!t)throw new Error("No config object has been provided.");"boolean"!=typeof t.useTransform&&(t.useTransform=!0),"number"!=typeof t.gutter&&(t.gutter=25),t.container||i("container"),t.items||t.static||i("items or static")},i=function(t){throw new Error("Missing property '"+t+"' in MagicGrid config")},e=function(t){for(var i=t[0],e=0,n=t;e<n.length;e+=1){var s=n[e];s.height<i.height&&(i=s)}return i},n=function(i){t(i),i.container instanceof HTMLElement?(this.container=i.container,this.containerClass=i.container.className):(this.containerClass=i.container,this.container=document.querySelector(i.container)),this.items=this.container.children,this.static=i.static||!1,this.size=i.items,this.gutter=i.gutter,this.maxColumns=i.maxColumns||!1,this.targetColumnWidth=i.targetColumnWidth,this.useMin=i.useMin||!1,this.useTransform=i.useTransform,this.animate=i.animate||!1,this.started=!1,this.init()};return n.prototype.init=function(){if(this.ready()&&!this.started){this.container.style.position="relative";for(var t=0;t<this.items.length;t++){var i=this.items[t].style;i.position="absolute",this.animate&&(i.transition=(this.useTransform?"transform":"top, left")+" 0.2s ease")}this.started=!0}},n.prototype.colWidth=function(){if(this.targetColumnWidth){var t=Math.min(Math.round(this.width/(this.targetColumnWidth+this.gutter)),this.items.length);return Math.floor(this.width/t)}return this.items[0].getBoundingClientRect().width},n.prototype.setup=function(){var t=this.width=this.container.getBoundingClientRect().width,i=this.colWidth(),e=Math.floor(t/i)||1,n=[];this.maxColumns&&e>this.maxColumns&&(e=this.maxColumns);for(var s=0;s<e;s++)n[s]={height:0,index:s};return{cols:n,wSpace:t-e*i}},n.prototype.nextCol=function(t,i){return this.useMin?e(t):t[i%t.length]},n.prototype.positionItems=function(){var t=this.setup(),i=t.cols,e=t.wSpace,n=0,s=this.colWidth();e=Math.floor(e/2);for(var o=0;o<this.items.length;o++){var r=this.nextCol(i,o),h=this.items[o],a=r.height?this.gutter:0,u=Math.floor(r.index*(s+this.gutter/2)+e)+"px",c=r.height+a+"px";this.useTransform?h.style.transform="translate("+u+", "+c+")":(h.style.top=c,h.style.left=u),h.style.width=Math.floor(s-this.gutter/2)+"px","absolute"!==h.style.position&&(h.style.position="absolute"),r.height+=h.getBoundingClientRect().height+a,r.height>n&&(n=r.height)}this.container.style.height=n+"px"},n.prototype.ready=function(){return!!this.static||this.items.length>=this.size},n.prototype.getReady=function(){var t=this,i=setInterval(function(){t.container=document.querySelector(t.containerClass),t.items=t.container.children,t.ready()&&(clearInterval(i),t.init(),t.listen())},100)},n.prototype.listen=function(){var t=this;if(this.ready()){var i;window.addEventListener("resize",function(){i||(i=setTimeout(function(){t.positionItems(),i=null},200))}),this.positionItems()}else this.getReady()},n});
